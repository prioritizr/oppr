<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add minimum set objective — add_min_set_objective • ppr</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Add minimum set objective — add_min_set_objective" />

<meta property="og:description" content="Set the objective of a project prioritization problem to
minimize the cost of the solution whilst ensuring that all targets are met.
This objective is conceptually similar to that used in Marxan
(Ball, Possingham &amp;amp; Watts 2009)." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ppr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ppr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/ppr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add minimum set objective</h1>
    <small class="dont-index">Source: <a href='https://github.com/prioritizr/ppr/blob/master/R/add_min_set_objective.R'><code>R/add_min_set_objective.R</code></a></small>
    <div class="hidden name"><code>add_min_set_objective.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Set the objective of a project prioritization <code><a href='problem.html'>problem</a></code> to
minimize the cost of the solution whilst ensuring that all targets are met.
This objective is conceptually similar to that used in <em>Marxan</em>
(Ball, Possingham &amp; Watts 2009).</p>
    
    </div>

    <pre class="usage"><span class='fu'>add_min_set_objective</span>(<span class='no'>x</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='ProjectProblem-class.html'>ProjectProblem-class</a></code> object.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code><a href='ProjectProblem-class.html'>ProjectProblem-class</a></code> object with the objective
  added to it.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>A problem objective is used to specify the overall goal of the
  project prioritization problem.
  Here, the minimum set objective seeks to find the set of actions that
  minimizes the overall cost of the prioritization, while ensuring that the
  funded projects meet a set of persistence targets for the conservation
  features (e.g. populations, species, eco-systems). Let \(I\) represent
  the set of conservation actions (indexed by \(i\)). Let \(C_i\) denote
  the cost for funding action \(i\). Also, let \(F\) represent each
  feature (indexed by \(f\)), \(T_f\) represent the persistence target
  for feature \(f\), and \(E_f\) denote the probability that each
  feature will go extinct given the funded conservation projects.</p>
<p>To guide the prioritization, the conservation actions are organized into
  conservation projects. Let \(J\) denote the set of conservation projects
  (indexed by \(j\)), and let \(A_{ij}\) denote which actions
  \(i \in I\) comprise each conservation project
  \(j \in J\) using zeros and ones. Next, let \(P_j\) represent
  the probability of project \(j\) being successful if it is funded. Also,
  let \(B_{fj}\) denote the enhanced probability that each feature
  \(f \in F\) associated with the project \(j \in J\)
  will persist if all of the actions that comprise project \(j\) are funded
  and that project is allocated to feature \(f\).
  For convenience,
  let \(Q_{fj}\) denote the actual probability that each
  \(f \in F\) associated with the project \(j \in J\)
  is expected to persist if the project is funded. If the argument
  to <code>adjust_for_baseline</code> in the <code>problem</code> function was set to
  <code>TRUE</code>, and this is the default behavior, then
  \(Q_{fj} = (P_{j} \times B_{fj}) + \bigg(\big(1 - (P_{j} B_{fj})\big)
  \times (P_{n} \times B_{fn})\bigg)\), where <code>n</code> corresponds to the
  baseline "do nothing" project. This means that the probability
  of a feature persisting if a project is allocated to a feature
  depends on (i) the probability of the project succeeding, (ii) the
  probability of the feature persisting if the project does not fail,
  and (iii) the probability of the feature persisting even if the project
  fails. Otherwise, if the argument is set to <code>FALSE</code>, then
  \(Q_{fj} = P_{j} \times B_{fj}\).</p>
<p>The binary control variables \(X_i\) in this problem indicate whether
  each project \(i \in I\) is funded or not. The decision
  variables in this problem are the \(Y_{j}\), \(Z_{fj}\), and \(E_f\)
  variables.
  Specifically, the binary \(Y_{j}\) variables indicate if project \(j\)
  is funded or not based on which actions are funded; the binary
  \(Z_{fj}\) variables indicate if project \(j\) is used to manage
  feature \(f\) or not; and the semi-continuous \(E_f\) variables
  denote the probability that feature \(f\) will go extinct.</p>
<p>Now that we have defined all the data and variables, we can formulate
  the problem. For convenience, let the symbol used to denote each set also
  represent its cardinality (e.g. if there are ten features, let \(F\)
  represent the set of ten features and also the number ten).</p>
<p>$$
  \mathrm{Minimize} \space \sum_{i = 0}^{I} C_i X_i \space
  \mathrm{(eqn \space 1a)} \\
  \mathrm{Subject \space to} \space  \\
  (1 - E_f) \geq T_f \space \forall f \in F \space
  \mathrm{(eqn \space 1b)} \\
  E_f = 1 - \sum_{j = 0}^{J} Z_{fj} Q_{fj} \space \forall \space f \in F
  \space \mathrm{(eqn \space 1c)} \\
  Z_{fj} \leq Y_{j} \space \forall \space j \in J \space \mathrm{(eqn \space
  1d)} \\
  \sum_{j = 0}^{J} Z_{fj} \times \mathrm{ceil}(Q_{fj}) = 1 \space \forall
  \space f \in F \space \mathrm{(eqn \space 1e)} \\
  A_{ij} Y_{j} \leq X_{i} \space \forall \space i \in I, j \in J \space
  \mathrm{(eqn \space 1f)} \\
  E_{f} \geq 0, E_{f} \leq 1 \space \forall \space b \in B \space
  \mathrm{(eqn \space 1g)} \\
  X_{i}, Y_{j}, Z_{fj} \in [0, 1] \space \forall \space i \in I, j \in J, f
  \in F \space \mathrm{(eqn \space 1h)}
  $$</p>
<p>The objective (eqn 1a) is to minimize the cost of the funded actions.
  Constraints (eqn 1b) ensure that the persistence targets are met.
  Constraints (eqn 1c) calculate the probability that each feature
  will go extinct according to their allocated project.
  Constraints (eqn 1d) ensure that feature can only be allocated to projects
  that have all of their actions funded. Constraints (eqn 1e) state that each
  feature can only be allocated to a single project. Constraints (eqn 1f)
  ensure that a project cannot be funded unless all of its actions are
  funded. Constraints (eqns 1g) ensure that the probability variables
  (\(E_f\)) are bounded between zero and one. Constraints (eqns 1h) ensure
  that the action funding (\(X_i\)), project funding (\(Y_j\)), and
  project allocation (\(Z_{fj}\)) variables are binary.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Ball IR, Possingham HP &amp; Watts M (2009) Marxan and relatives: software for
spatial conservation prioritisation.
<em>Spatial conservation prioritisation: Quantitative methods and
computational tools</em>, 185-195.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='objectives.html'>objectives</a></code>, <code><a href='targets.html'>targets</a></code>.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># load the ggplot2 R package to customize plot</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>ggplot2</span>)

<span class='co'># load data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='no'>sim_projects</span>, <span class='no'>sim_features</span>, <span class='no'>sim_actions</span>)

<span class='co'># build problem with minimum set objective and targets that require each</span>
<span class='co'># feature to have a 30\% chance of persisting into the future</span>
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='problem.html'>problem</a></span>(<span class='no'>sim_projects</span>, <span class='no'>sim_actions</span>, <span class='no'>sim_features</span>,
             <span class='st'>"name"</span>, <span class='st'>"success"</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>, <span class='st'>"name"</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_min_set_objective</span>() <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_absolute_targets.html'>add_absolute_targets</a></span>(<span class='fl'>0.3</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span>()

<span class='co'># solve problem</span>
<span class='no'>s</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p</span>)</div><div class='output co'>#&gt; Optimize a model with 46 rows, 42 columns and 92 nonzeros
#&gt; Variable types: 0 continuous, 42 integer (42 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [9e-02, 1e+00]
#&gt;   Objective range  [9e+01, 1e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [3e-01, 1e+00]
#&gt; Found heuristic solution: objective 497.7671458
#&gt; Presolve removed 45 rows and 20 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 1 rows, 22 columns, 2 nonzeros
#&gt; Variable types: 0 continuous, 22 integer (22 binary)
#&gt; 
#&gt; Explored 0 nodes (0 simplex iterations) in 0.00 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 1: 497.767 
#&gt; 
#&gt; Optimal solution found (tolerance 0.00e+00)
#&gt; Best objective 4.977671458279e+02, best bound 4.977671458279e+02, gap 0.0000%</div><div class='input'>
<span class='co'># print solution</span>
<span class='fu'><a href='print.html'>print</a></span>(<span class='no'>s</span>)</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 x 21</span><span>
#&gt;   solution status   obj  cost F1_action F2_action F3_action F4_action F5_action
#&gt;      </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>        1 OPTIM~  498.  498.         1         1         1         1         1
#&gt; </span><span style='color: #949494;'># ... with 12 more variables: baseline_action </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F1_project </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>,
#&gt; #   F2_project </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F3_project </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F4_project </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F5_project </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>,
#&gt; #   baseline_project </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F1 </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F2 </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F3 </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F4 </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F5 </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span></div><div class='input'>
<span class='co'># plot solution, and add a dashed line to indicate the feature targets</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>p</span>, <span class='no'>s</span>) +
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_hline</a></span>(<span class='kw'>yintercept</span> <span class='kw'>=</span> <span class='fl'>0.3</span>, <span class='kw'>linetype</span> <span class='kw'>=</span> <span class='st'>"dashed"</span>)</div><div class='img'><img src='add_min_set_objective-1.png' alt='' width='700' height='433' /></div><div class='input'>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://www.richard-schuster.com/'>Richard Schuster</a>, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, <a href='https://josephrbennett.wordpress.com/'>Joeseph Bennett</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

