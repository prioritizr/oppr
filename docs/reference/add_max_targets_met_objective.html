<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Add maximum targets met objective — add_max_targets_met_objective • oppr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Add maximum targets met objective — add_max_targets_met_objective"><meta property="og:description" content="Set the objective of a project prioritization problem() to
maximize the total number of persistence targets met for the features, whilst
ensuring that the cost of the solution is within a pre-specified budget
(Chades et al. 2015). In some project prioritization exercises,
decision makers may have a target level of persistence for each feature
(e.g. a 90% persistence target corresponding to a 90% chance for the
features persisting into the future). In such exercises, the decision makers
do not perceive any benefit when a target is not met (e.g. if a feature
has a persistence target of 90% and a solution only secures a 70% chance
of persistence then no benefit is accrued for that feature) or when a target
is surpassed (e.g. if a feature has a persistence target of 50%, then a
solution which
secures a 95% chance of persistence will accrue the same benefit as a
solution which secures a 50% chance of persistence). Furthermore, weights
can also be used to specify the relative importance of meeting targets
for specific features (see add_feature_weights())."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oppr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/oppr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/prioritizr/oppr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add maximum targets met objective</h1>
    <small class="dont-index">Source: <a href="https://github.com/prioritizr/oppr/blob/HEAD/R/add_max_targets_met_objective.R" class="external-link"><code>R/add_max_targets_met_objective.R</code></a></small>
    <div class="hidden name"><code>add_max_targets_met_objective.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Set the objective of a project prioritization <code><a href="problem.html">problem()</a></code> to
maximize the total number of persistence targets met for the features, whilst
ensuring that the cost of the solution is within a pre-specified budget
(Chades <em>et al.</em> 2015). In some project prioritization exercises,
decision makers may have a target level of persistence for each feature
(e.g. a 90% persistence target corresponding to a 90% chance for the
features persisting into the future). In such exercises, the decision makers
do not perceive any benefit when a target is not met (e.g. if a feature
has a persistence target of 90% and a solution only secures a 70% chance
of persistence then no benefit is accrued for that feature) or when a target
is surpassed (e.g. if a feature has a persistence target of 50%, then a
solution which
secures a 95% chance of persistence will accrue the same benefit as a
solution which secures a 50% chance of persistence). Furthermore, weights
can also be used to specify the relative importance of meeting targets
for specific features (see <code><a href="add_feature_weights.html">add_feature_weights()</a></code>).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_max_targets_met_objective</span><span class="op">(</span><span class="va">x</span>, <span class="va">budget</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p><a href="ProjectProblem-class.html">ProjectProblem</a> object.</p></dd>


<dt>budget</dt>
<dd><p><code>numeric</code> budget for funding actions.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p><a href="ProjectProblem-class.html">ProjectProblem</a> object with the objective
added to it.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>A problem objective is used to specify the overall goal of the
project prioritization problem.
Here, the maximum targets met objective seeks to find the set of actions
that maximizes the total number of features (e.g. populations, species,
ecosystems) that have met their persistence targets within a
pre-specified budget. Let \(I\) represent the set of conservation
actions (indexed by \(i\)). Let \(C_i\) denote the cost for funding
action \(i\), and let \(m\) denote the maximum expenditure (i.e. the
budget). Also, let \(F\) represent each feature (indexed by \(f\)),
\(W_f\) represent the weight for each feature \(f\) (defaults to one
for each feature unless specified otherwise), \(T_f\) represent the
persistence target for each feature \(f\), and \(E_f\) denote the
probability that each feature will go extinct given the funded
conservation projects.</p>
<p>To guide the prioritization, the conservation actions are organized into
conservation projects. Let \(J\) denote the set of conservation projects
(indexed by \(j\)), and let \(A_{ij}\) denote which actions
\(i \in I\) comprise each conservation project
\(j \in J\) using zeros and ones. Next, let \(P_j\) represent
the probability of project \(j\) being successful if it is funded. Also,
let \(B_{fj}\) denote the enhanced probability that each feature
\(f \in F\) associated with the project \(j \in J\)
will persist if all of the actions that comprise project \(j\) are funded
and that project is allocated to feature \(f\).
For convenience,
let \(Q_{fj}\) denote the actual probability that each
\(f \in F\) associated with the project \(j \in J\)
is expected to persist if the project is funded. If the argument
to <code>adjust_for_baseline</code> in the <code>problem</code> function was set to
<code>TRUE</code>, and this is the default behavior, then
\(Q_{fj} = (P_{j} \times B_{fj}) + \bigg(\big(1 - (P_{j} B_{fj})\big)
  \times (P_{n} \times B_{fn})\bigg)\), where <code>n</code> corresponds to the
baseline "do nothing" project. This means that the probability
of a feature persisting if a project is allocated to a feature
depends on (i) the probability of the project succeeding, (ii) the
probability of the feature persisting if the project does not fail,
and (iii) the probability of the feature persisting even if the project
fails. Otherwise, if the argument is set to <code>FALSE</code>, then
\(Q_{fj} = P_{j} \times B_{fj}\).</p>
<p>The binary control variables \(X_i\) in this problem indicate whether
each project \(i \in I\) is funded or not. The decision
variables in this problem are the \(Y_{j}\), \(Z_{fj}\), \(E_f\),
and \(G_f\) variables.
Specifically, the binary \(Y_{j}\) variables indicate if project \(j\)
is funded or not based on which actions are funded; the binary
\(Z_{fj}\) variables indicate if project \(j\) is used to manage
feature \(f\) or not; the semi-continuous \(E_f\) variables
denote the probability that feature \(f\) will go extinct; and the
\(G_f\) variables indicate if the persistence target for feature
\(f\) is met.</p>
<p>Now that we have defined all the data and variables, we can formulate
the problem. For convenience, let the symbol used to denote each set also
represent its cardinality (e.g. if there are ten features, let \(F\)
represent the set of ten features and also the number ten).</p>
<p>$$
  \mathrm{Maximize} \space \sum_{f = 0}^{F} G_f W_f \space
  \mathrm{(eqn \space 1a)} \\
  \mathrm{Subject \space to}
  \sum_{i = 0}^{I} C_i \leq m \space \mathrm{(eqn \space 1b)} \\
  G_f (1 - E_f) \geq T_f \space \forall \space f \in F \space
  \mathrm{(eqn \space 1c)} \\
  E_f = 1 - \sum_{j = 0}^{J} Z_{fj} Q_{fj} \space \forall \space f \in F
  \space \mathrm{(eqn \space 1d)} \\
  Z_{fj} \leq Y_{j} \space \forall \space j \in J \space \mathrm{(eqn \space
  1e)} \\
  \sum_{j = 0}^{J} Z_{fj} \times \mathrm{ceil}(Q_{fj}) = 1 \space \forall
  \space f \in F \space \mathrm{(eqn \space 1f)} \\
  A_{ij} Y_{j} \leq X_{i} \space \forall \space i \in I, j \in J \space
  \mathrm{(eqn \space 1g)} \\
  E_{f} \geq 0, E_{f} \leq 1 \space \forall \space b \in B \space
  \mathrm{(eqn \space 1h)} \\
  G_{f}, X_{i}, Y_{j}, Z_{fj} \in [0, 1] \space \forall \space i \in I, j
  \in J, f \in F \space \mathrm{(eqn \space 1i)}
  $$</p>
<p>The objective (eqn 1a) is to maximize the weighted total number of the
features that have their persistence targets met.
Constraints (eqn 1b) calculate which persistence targets have been met.
Constraint (eqn 1c) limits the maximum expenditure (i.e. ensures
that the cost of the funded actions do not exceed the budget).
Constraints (eqn 1d) calculate the probability that each feature
will go extinct according to their allocated project.
Constraints (eqn 1e) ensure that feature can only be allocated to projects
that have all of their actions funded. Constraints (eqn 1f) state that each
feature can only be allocated to a single project. Constraints (eqn 1g)
ensure that a project cannot be funded unless all of its actions are funded.
Constraints (eqns 1h) ensure that the probability variables
(\(E_f\)) are bounded between zero and one. Constraints (eqns 1i) ensure
that the target met (\(G_f\)), action funding (\(X_i\)), project funding
(\(Y_j\)), and project allocation (\(Z_{fj}\)) variables are binary.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Chades I, Nicol S, van Leeuwen S, Walters B, Firn J, Reeson A, Martin TG &amp;
Carwardine J (2015) Benefits of integrating complementarity into priority
threat management. <em>Conservation Biology</em>, <strong>29</strong>, 525--536.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><a href="objectives.html">objectives</a>.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># load the ggplot2 R package to customize plot</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># load data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sim_projects</span>, <span class="va">sim_features</span>, <span class="va">sim_actions</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># manually adjust feature weights</span></span></span>
<span class="r-in"><span><span class="va">sim_features</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">2</span>, <span class="fl">6</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># build problem with maximum targets met objective, a $200 budget,</span></span></span>
<span class="r-in"><span><span class="co"># targets that require each feature to have a 20% chance of persisting into</span></span></span>
<span class="r-in"><span><span class="co"># the future, and zero cost actions locked in</span></span></span>
<span class="r-in"><span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="problem.html">problem</a></span><span class="op">(</span><span class="va">sim_projects</span>, <span class="va">sim_actions</span>, <span class="va">sim_features</span>,</span></span>
<span class="r-in"><span>             <span class="st">"name"</span>, <span class="st">"success"</span>, <span class="st">"name"</span>, <span class="st">"cost"</span>, <span class="st">"name"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>      <span class="fu">add_max_targets_met_objective</span><span class="op">(</span>budget <span class="op">=</span> <span class="fl">200</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="add_absolute_targets.html">add_absolute_targets</a></span><span class="op">(</span><span class="fl">0.2</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="add_locked_in_constraints.html">add_locked_in_constraints</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">sim_actions</span><span class="op">$</span><span class="va">cost</span> <span class="op">&lt;</span> <span class="fl">1e-5</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="add_binary_decisions.html">add_binary_decisions</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># solve problem</span></span></span>
<span class="r-in"><span><span class="va">s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="solve.html">solve</a></span><span class="op">(</span><span class="va">p1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter Username</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter TimeLimit to value 2147483647</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter MIPGap to value 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter NumericFocus to value 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter Presolve to value 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter Threads to value 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter PoolSolutions to value 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter PoolSearchMode to value 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Academic license - for non-commercial use only - expires 2025-04-21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Gurobi Optimizer version 11.0.2 build v11.0.2rc0 (linux64 - "Ubuntu 22.04.4 LTS")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CPU model: 11th Gen Intel(R) Core(TM) i7-1185G7 @ 3.00GHz, instruction set [SSE2|AVX|AVX2|AVX512]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Thread count: 4 physical cores, 8 logical processors, using up to 1 threads</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimize a model with 47 rows, 47 columns and 102 nonzeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model fingerprint: 0x00731be5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable types: 0 continuous, 47 integer (47 binary)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficient statistics:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Matrix range     [9e-02, 1e+02]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Objective range  [1e+00, 1e+00]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Bounds range     [1e+00, 1e+00]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   RHS range        [1e+00, 2e+02]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Found heuristic solution: objective 3.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Presolve removed 14 rows and 7 columns</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Presolve time: 0.00s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Presolved: 33 rows, 40 columns, 69 nonzeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable types: 0 continuous, 40 integer (40 binary)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Root relaxation presolved: 33 rows, 40 columns, 69 nonzeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Root relaxation: objective 4.961414e+00, 7 iterations, 0.00 seconds (0.00 work units)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Nodes    |    Current Node    |     Objective Bounds      |     Work</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0     0    4.96141    0    4    3.00000    4.96141  65.4%     -    0s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> H    0     0                       4.0000000    4.96013  24.0%     -    0s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0     0    4.96013    0    4    4.00000    4.96013  24.0%     -    0s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Explored 1 nodes (7 simplex iterations) in 0.00 seconds (0.00 work units)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Thread count was 1 (of 8 available processors)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Solution count 1: 4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> No other solutions better than 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimal solution found (tolerance 0.00e+00)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Best objective 4.000000000000e+00, best bound 4.000000000000e+00, gap 0.0000%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># print solution</span></span></span>
<span class="r-in"><span><span class="fu"><a href="print.html">print</a></span><span class="op">(</span><span class="va">s1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 21</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   solution status    obj  cost F1_action F2_action F3_action F4_action F5_action</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>        1 OPTIMAL     4  99.9         0         0         0         0         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 12 more variables: baseline_action &lt;dbl&gt;, F1_project &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   F2_project &lt;dbl&gt;, F3_project &lt;dbl&gt;, F4_project &lt;dbl&gt;, F5_project &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   baseline_project &lt;dbl&gt;, F1 &lt;dbl&gt;, F2 &lt;dbl&gt;, F3 &lt;dbl&gt;, F4 &lt;dbl&gt;, F5 &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot solution, and add a dashed line to indicate the feature targets</span></span></span>
<span class="r-in"><span><span class="co"># we can see the three features meet the targets under the baseline</span></span></span>
<span class="r-in"><span><span class="co"># scenario, and the project for F5 was prioritized for funding</span></span></span>
<span class="r-in"><span><span class="co"># so that its probability of persistence meets the target</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">s1</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0.2</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="add_max_targets_met_objective-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># build another problem that includes feature weights</span></span></span>
<span class="r-in"><span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="add_feature_weights.html">add_feature_weights</a></span><span class="op">(</span><span class="st">"weight"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># solve problem</span></span></span>
<span class="r-in"><span><span class="va">s2</span> <span class="op">&lt;-</span> <span class="fu"><a href="solve.html">solve</a></span><span class="op">(</span><span class="va">p2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter Username</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter TimeLimit to value 2147483647</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter MIPGap to value 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter NumericFocus to value 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter Presolve to value 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter Threads to value 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter PoolSolutions to value 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set parameter PoolSearchMode to value 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Academic license - for non-commercial use only - expires 2025-04-21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Gurobi Optimizer version 11.0.2 build v11.0.2rc0 (linux64 - "Ubuntu 22.04.4 LTS")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CPU model: 11th Gen Intel(R) Core(TM) i7-1185G7 @ 3.00GHz, instruction set [SSE2|AVX|AVX2|AVX512]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Thread count: 4 physical cores, 8 logical processors, using up to 1 threads</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimize a model with 47 rows, 47 columns and 102 nonzeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model fingerprint: 0x2cfdc744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable types: 0 continuous, 47 integer (47 binary)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficient statistics:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Matrix range     [9e-02, 1e+02]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Objective range  [1e+00, 8e+00]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Bounds range     [1e+00, 1e+00]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   RHS range        [1e+00, 2e+02]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Found heuristic solution: objective 13.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Presolve removed 14 rows and 7 columns</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Presolve time: 0.00s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Presolved: 33 rows, 40 columns, 69 nonzeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable types: 0 continuous, 40 integer (40 binary)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Root relaxation presolved: 33 rows, 39 columns, 69 nonzeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Root relaxation: objective 1.996013e+01, 7 iterations, 0.00 seconds (0.00 work units)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Nodes    |    Current Node    |     Objective Bounds      |     Work</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0     0   19.96013    0    4   13.00000   19.96013  53.5%     -    0s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> H    0     0                      14.0000000   19.76848  41.2%     -    0s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> H    0     0                      19.0000000   19.76848  4.04%     -    0s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0     0   19.76848    0    4   19.00000   19.76848  4.04%     -    0s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Explored 1 nodes (7 simplex iterations) in 0.00 seconds (0.00 work units)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Thread count was 1 (of 8 available processors)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Solution count 1: 19 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> No other solutions better than 19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimal solution found (tolerance 0.00e+00)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Best objective 1.900000000000e+01, best bound 1.900000000000e+01, gap 0.0000%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># print solution</span></span></span>
<span class="r-in"><span><span class="fu"><a href="print.html">print</a></span><span class="op">(</span><span class="va">s2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 21</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   solution status    obj  cost F1_action F2_action F3_action F4_action F5_action</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>        1 OPTIMAL    19  103.         0         0         1         0         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 12 more variables: baseline_action &lt;dbl&gt;, F1_project &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   F2_project &lt;dbl&gt;, F3_project &lt;dbl&gt;, F4_project &lt;dbl&gt;, F5_project &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   baseline_project &lt;dbl&gt;, F1 &lt;dbl&gt;, F2 &lt;dbl&gt;, F3 &lt;dbl&gt;, F4 &lt;dbl&gt;, F5 &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot solution, and add a dashed line to indicate the feature targets</span></span></span>
<span class="r-in"><span><span class="co"># we can see that adding weights to the problem has changed the solution</span></span></span>
<span class="r-in"><span><span class="co"># specifically, the projects for the feature F3 is now funded</span></span></span>
<span class="r-in"><span><span class="co"># to enhance its probability of persistence</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">p2</span>, <span class="va">s2</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0.2</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="add_max_targets_met_objective-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://jeffrey-hanson.com" class="external-link">Jeffrey O Hanson</a>, <a href="http://www.richard-schuster.com" class="external-link">Richard Schuster</a>, <a href="http://strimas.com" class="external-link">Matthew Strimas-Mackey</a>, <a href="https://josephrbennett.wordpress.com" class="external-link">Joseph R Bennett</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

