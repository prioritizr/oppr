<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Replacement cost — replacement_costs • oppr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Replacement cost — replacement_costs"><meta property="og:description" content="Calculate the replacement cost for priority actions in a project
prioritization problem() (Moilanen et al. 2009). Actions associated
with larger replacement cost values are more irreplaceabe, and may
need to be implemented sooner than actions with lower replacement cost
values."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oppr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/oppr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/prioritizr/oppr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Replacement cost</h1>
    <small class="dont-index">Source: <a href="https://github.com/prioritizr/oppr/blob/HEAD/R/replacement_costs.R" class="external-link"><code>R/replacement_costs.R</code></a></small>
    <div class="hidden name"><code>replacement_costs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate the replacement cost for priority actions in a project
prioritization <code><a href="problem.html">problem()</a></code> (Moilanen <em>et al.</em> 2009). Actions associated
with larger replacement cost values are more irreplaceabe, and may
need to be implemented sooner than actions with lower replacement cost
values.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">replacement_costs</span><span class="op">(</span><span class="va">x</span>, <span class="va">solution</span>, n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>project prioritization <code><a href="problem.html">problem()</a></code>.</p></dd>


<dt>solution</dt>
<dd><p><code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">base::data.frame()</a></code> or
<code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble()</a></code> table containing the solutions. Here,
rows correspond to different solutions and columns correspond to
different actions. Each column in the argument to <code>solution</code> should
be named according to a different action in <code>x</code>.
Cell values indicate if an action is funded in a given solution or not,
and should be either zero or one. Arguments to <code>solution</code> can
contain additional columns, and they will be ignored.</p></dd>


<dt>n</dt>
<dd><p><code>integer</code> solution number to calculate replacement cost values.
Since each row in the argument to <code>solutions</code> corresponds to a
different solution, this argument should correspond to a row in
the argument to <code>solutions</code>. Defaults to 1.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble()</a></code> table containing the following
columns:</p>


<dl><dt><code>"action"</code></dt>
<dd><p><code>character</code> name of each action.</p></dd>


<dt><code>"cost"</code></dt>
<dd><p><code>numeric</code> cost of each solution when each
action is locked out.</p></dd>


<dt><code>"obj"</code></dt>
<dd><p><code>numeric</code> objective value of each solution when
each action is locked out. This is calculated using the objective
function defined for the argument to <code>x</code>.</p></dd>


<dt><code>"rep_cost"</code></dt>
<dd><p><code>numeric</code> replacement cost for each
action. Greater values indicate greater irreplaceability. Missing
(<code>NA</code>) values are assigned to actions which are not selected for
funding in the specified solution, infinite (<code>Inf</code>) values are
assigned to to actions which are required to meet feasibility
constraints, and negative values mean that superior solutions than
the specified solution exist.</p></dd>



</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>Replacement cost values are calculated for each priority action
specified in the solution. Missing (<code>NA</code>) values are assigned to
actions which are not selected for funding in the specified solution.
For a given action, its replacement cost is calculated by
(i) calculating the objective value for the optimal solution to
the argument to <code>x</code>, (ii) calculating the objective value for the
optimal solution to the argument to <code>x</code> with the given action locked
out, (iii) calculating the difference between the two objective
values, (iv) the problem has an objective which aims to minimize
the objective value (only <code><a href="add_min_set_objective.html">add_min_set_objective()</a></code>, then
the resulting value is multiplied by minus one so that larger values
always indicate actions with greater irreplaceability. Please note this
function can take a long time to complete
for large problems since it involves re-solving the problem for every
action selected for funding.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Moilanen A, Arponen A, Stokland JN &amp; Cabeza M (2009) Assessing replacement
cost of conservation areas: how does habitat loss influence priorities?
<em>Biological Conservation</em>, <strong>142</strong>, 575--585.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="solution_statistics.html">solution_statistics()</a></code>,
<code><a href="project_cost_effectiveness.html">project_cost_effectiveness()</a></code>.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># load data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sim_projects</span>, <span class="va">sim_features</span>, <span class="va">sim_actions</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># build problem with maximum richness objective and $400 budget</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="problem.html">problem</a></span><span class="op">(</span><span class="va">sim_projects</span>, <span class="va">sim_actions</span>, <span class="va">sim_features</span>,</span></span>
<span class="r-in"><span>             <span class="st">"name"</span>, <span class="st">"success"</span>, <span class="st">"name"</span>, <span class="st">"cost"</span>, <span class="st">"name"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="add_max_richness_objective.html">add_max_richness_objective</a></span><span class="op">(</span>budget <span class="op">=</span> <span class="fl">400</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="add_feature_weights.html">add_feature_weights</a></span><span class="op">(</span><span class="st">"weight"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="add_binary_decisions.html">add_binary_decisions</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># solve problem</span></span></span>
<span class="r-in"><span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="solve.html">solve</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Gurobi Optimizer version 9.5.2 build v9.5.2rc0 (linux64)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Thread count: 4 physical cores, 8 logical processors, using up to 1 threads</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimize a model with 47 rows, 47 columns and 102 nonzeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model fingerprint: 0xa33f6587</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable types: 0 continuous, 42 integer (42 binary)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Semi-Variable types: 5 continuous, 0 integer</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficient statistics:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Matrix range     [9e-02, 1e+02]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Objective range  [2e-01, 2e+00]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Bounds range     [1e+00, 1e+00]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   RHS range        [1e+00, 4e+02]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Found heuristic solution: objective 0.6654645</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Presolve removed 16 rows and 12 columns</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Presolve time: 0.00s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Presolved: 31 rows, 35 columns, 64 nonzeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable types: 0 continuous, 35 integer (35 binary)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Root relaxation presolved: 31 rows, 35 columns, 64 nonzeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Root relaxation: objective 1.749045e+00, 11 iterations, 0.00 seconds (0.00 work units)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Nodes    |    Current Node    |     Objective Bounds      |     Work</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *    0     0               0       1.7490448    1.74904  0.00%     -    0s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Explored 1 nodes (11 simplex iterations) in 0.00 seconds (0.00 work units)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Thread count was 1 (of 8 available processors)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Solution count 1: 1.74904 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimal solution found (tolerance 0.00e+00)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Best objective 1.749044775334e+00, best bound 1.749044775334e+00, gap 0.0000%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># print solution</span></span></span>
<span class="r-in"><span><span class="fu"><a href="print.html">print</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 21</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   solution status    obj  cost F1_action F2_ac…¹ F3_ac…² F4_ac…³ F5_ac…⁴ basel…⁵</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>        1 OPTIMAL  1.75  395.         1       1       0       1       1       1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 11 more variables: F1_project &lt;dbl&gt;, F2_project &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   F3_project &lt;dbl&gt;, F4_project &lt;dbl&gt;, F5_project &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   baseline_project &lt;dbl&gt;, F1 &lt;dbl&gt;, F2 &lt;dbl&gt;, F3 &lt;dbl&gt;, F4 &lt;dbl&gt;, F5 &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   and abbreviated variable names ¹​F2_action, ²​F3_action, ³​F4_action,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ⁴​F5_action, ⁵​baseline_action</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate replacement cost values</span></span></span>
<span class="r-in"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu">replacement_costs</span><span class="op">(</span><span class="va">p</span>, <span class="va">s</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># print output</span></span></span>
<span class="r-in"><span><span class="fu"><a href="print.html">print</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   name             cost    obj  rep_cost</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> F1_action        300.   1.64    0.108 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> F2_action        397.   1.70    0.045<span style="text-decoration: underline;">8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> F3_action         <span style="color: #BB0000;">NA</span>   <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> F4_action        399.   1.56    0.192 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> F5_action        398.   1.18    0.569 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> baseline_action  <span style="color: #BB0000;">Inf</span>  <span style="color: #BB0000;">Inf</span>    -<span style="color: #BB0000;">Inf</span>     </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot histogram of replacement costs,</span></span></span>
<span class="r-in"><span><span class="co"># with this objective, greater values indicate greater irreplaceability</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">r</span><span class="op">$</span><span class="va">rep_cost</span>, xlab <span class="op">=</span> <span class="st">"Replacement cost"</span>, main <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="replacement_costs-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://jeffrey-hanson.com" class="external-link">Jeffrey O Hanson</a>, <a href="http://www.richard-schuster.com" class="external-link">Richard Schuster</a>, <a href="http://strimas.com" class="external-link">Matthew Strimas-Mackey</a>, <a href="https://josephrbennett.wordpress.com" class="external-link">Joseph R Bennett</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

